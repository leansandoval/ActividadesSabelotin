import ExpoDraw from 'expo-draw';
import React, { useState } from 'react';
import { ImageBackground, SafeAreaView, Text, TouchableOpacity, View } from 'react-native';
import { manejarVerificacionTrazado } from '../../src/utils/verificacionTrazado';
import { Letra } from '../../src/types';
import AImage from '../../assets/svg/abecedario/A.svg';
import BImage from '../../assets/svg/abecedario/B.svg';
import CImage from '../../assets/svg/abecedario/C.svg';
import DImage from '../../assets/svg/abecedario/D.svg';
import EImage from '../../assets/svg/abecedario/E.svg';
import FImage from '../../assets/svg/abecedario/F.svg';
import GImage from '../../assets/svg/abecedario/G.svg';
import HImage from '../../assets/svg/abecedario/H.svg';
import IImage from '../../assets/svg/abecedario/I.svg';
import JImage from '../../assets/svg/abecedario/J.svg';
import KImage from '../../assets/svg/abecedario/K.svg';
import LImage from '../../assets/svg/abecedario/L.svg';
import MImage from '../../assets/svg/abecedario/M.svg';
import NImage from '../../assets/svg/abecedario/N.svg';
import OImage from '../../assets/svg/abecedario/O.svg';
import PImage from '../../assets/svg/abecedario/P.svg';
import QImage from '../../assets/svg/abecedario/Q.svg';
import RImage from '../../assets/svg/abecedario/R.svg';
import SImage from '../../assets/svg/abecedario/S.svg';
import TImage from '../../assets/svg/abecedario/T.svg';
import UImage from '../../assets/svg/abecedario/U.svg';
import VImage from '../../assets/svg/abecedario/V.svg';
import WImage from '../../assets/svg/abecedario/W.svg';
import XImage from '../../assets/svg/abecedario/X.svg';
import YImage from '../../assets/svg/abecedario/Y.svg';
import ZImage from '../../assets/svg/abecedario/Z.svg';
import GrosorSelector from '../../components/GrosorSelector';
import LetterSelector from '../../components/LetterSelector';

const AREA_DIBUJO_SIZE = 400;
const GROSOR_TRAZADO_POR_DEFECTO = 12;
const LETRAS: Letra[] = [
  { nombre: 'A', svg: AImage, viewBox: { width: 461.961, height: 762.032 }, path: 'M225.533,147.031c14.265,0,26.656,1.893,37.164,5.664,10.508,3.778,17.317,9.57,20.431,17.383,16.861,44.531,33.661,93.299,50.396,146.289,16.733,52.997,33.012,106.58,48.839,160.742,15.565,51.825,30.609,100.916,45.142,147.266,1.557,4.432-2.273,10.81-11.48,19.141-9.211,8.338-21.342,16.541-36.385,24.609-15.05,8.075-30.616,14.002-46.699,17.773-16.089,3.778-30.354,3.388-42.807-1.172-12.453-4.553-20.498-15.295-24.128-32.227l-17.122-97.656c-2.08-11.975-4.348-21.808-6.811-29.492-2.469-7.678-5.643-14.386-9.535-20.117-3.891-5.725-8.561-8.722-14.009-8.984-5.709.525-10.507,3.906-14.399,10.156s-7.005,13.477-9.339,21.68c-2.335,8.203-4.542,18.817-6.616,31.836l-12.842,87.891c-3.636,20.312-13.754,32.812-30.354,37.5-16.606,4.688-34.963,4.56-55.065-.391-20.108-4.943-37.231-11.651-51.368-20.117-14.144-8.459-20.692-15.82-19.652-22.07,16.344-63.019,31.911-127.862,46.698-194.531,10.118-46.094,20.559-91.339,31.327-135.742,10.763-44.396,22.243-86.523,34.44-126.367,3.892-12.5,15.238-22.198,34.051-29.102,18.807-6.896,38.849-10.217,60.125-9.961ZM220.863,306.797h-1.167c-5.71.781-10.185,4.041-13.426,9.766-3.247,5.731-5.643,12.635-7.2,20.703-1.557,8.075-2.596,16.211-3.113,24.414-.523,8.203-.651,17.773-.389,28.711l50.59-1.953c0-10.938-.328-20.44-.973-28.516-.65-8.068-1.818-16.144-3.502-24.219-1.691-8.068-4.221-14.844-7.589-20.312-3.375-5.469-7.783-8.331-13.231-8.594Z' },
  { nombre: 'B', svg: BImage, viewBox: { width: 423.048, height: 762.032 }, path: 'M181.948,139.609c29.314,0,53.897,2.997,73.745,8.984,19.847,5.994,36.902,13.672,51.174,23.047,19.458,14.588,33.333,33.203,41.64,55.859,8.3,22.656,9.662,44.336,4.086,65.039-5.582,20.703-19.524,41.083-41.834,61.133l-34.246,30.078c17.378,4.432,39.433,12.372,66.156,23.828,8.039,2.606,16.601,8.466,25.685,17.578,9.078,9.119,16.15,23.047,21.209,41.797,5.06,18.75,5.509,43.75,1.362,75-4.153,29.688-15.311,55.145-33.468,76.367-18.162,21.229-40.667,37.695-67.519,49.414s-55.716,18.23-86.587,19.531c-32.951-.256-63.043-4.748-90.284-13.477-27.241-8.723-45.404-20.703-54.482-35.938-9.084-15.234-17.901-41.857-26.462-79.883-5.971-45.312-9.602-94.336-10.896-147.071-1.301-52.734-1.04-109.045.778-168.945,1.812-54.688,5.509-83.398,11.091-86.133,5.576-2.734,14.137-5.401,25.685-8.008,11.541-2.6,40.667-4.815,87.365-6.641,12.708-1.037,24.645-1.562,35.803-1.562ZM199.071,454.062c-12.976,0-23.872,2.539-32.689,7.617-8.823,5.079-13.231,12.44-13.231,22.071l6.616,85.938c2.59,10.156,9.534,17.059,20.82,20.703,11.286,3.65,23.866,3.65,37.748,0,13.876-3.645,26.073-11.262,36.581-22.852,10.507-11.584,16.405-27.277,17.706-47.07.256-15.363-3.308-27.93-10.702-37.695-7.394-9.766-16.8-16.993-28.214-21.68-11.419-4.688-22.959-7.031-34.634-7.031ZM190.898,223.203h-2.335c-9.084.525-16.928,2.539-23.544,6.055-6.615,3.516-9.923,8.008-9.923,13.477v71.875c0,7.031,3.953,11.268,11.869,12.695,7.911,1.435,17.25.263,28.02-3.516,10.763-3.771,20.297-10.352,28.603-19.727,8.3-9.375,12.708-21.484,13.23-36.328-.522-15.881-5.447-27.276-14.787-34.18-9.34-6.896-19.719-10.352-31.133-10.352Z' },
  { nombre: 'C', svg: CImage, viewBox: { width: 471.303, height: 762.032 }, path: 'M239.543,177.109c28.798-1.3,57.206-.977,85.226.977,28.019,1.953,52.469,7.166,73.355,15.625,20.881,8.466,35.219,21.619,43.002,39.453,7.783,17.841,5.965,41.864-5.448,72.07-10.38,13.807-20.887,21.875-31.521,24.219-10.642,2.344-21.276,1.172-31.911-3.516-10.641-4.688-21.275-10.803-31.911-18.359-29.837-13.8-55.588-17.706-77.247-11.719-21.665,5.994-40.083,20.38-55.26,43.164-15.177,22.791-27.569,52.283-37.165,88.477-3.113,18.494-1.751,37.305,4.086,56.446,5.837,19.141,14.654,34.832,26.463,47.07,11.802,12.244,25.228,17.322,40.277,15.234,15.044-2.082,30.354-14.973,45.921-38.672,7.26-13.537,16.473-21.936,27.63-25.195,11.152-3.254,23.41-3.381,36.775-.391,13.359,2.996,27.174,7.098,41.445,12.305,14.01,5.213,23.088,12.891,27.241,23.047,4.146,10.156,5.253,20.184,3.308,30.078-1.946,9.9-4.998,17.059-9.146,21.484-1.301,2.088-2.597,4.297-3.892,6.641-10.641,19.531-23.094,37.371-37.358,53.516-14.271,16.15-34.246,27.344-59.931,33.594s-60.97,4.297-105.85-5.859c-47.477-13.281-84.252-32.031-110.326-56.25-26.074-24.219-44.042-50.646-53.898-79.297-9.862-28.645-14.398-56.25-13.62-82.813,10.374-55.987,23.994-100.714,40.861-134.18,16.861-33.459,34.957-58.722,54.287-75.781,19.324-17.053,37.876-28.839,55.649-35.352,17.768-6.506,32.622-10.675,44.559-12.5,5.965-1.3,10.762-2.472,14.398-3.516Z' },
  { nombre: 'D', svg: DImage, viewBox: { width: 434.333, height: 762.032 }, path: 'M173.387,132.578c17.378,0,32.166,1.435,44.364,4.297,3.629-1.562,14.204,1.044,31.716,7.812,17.512,6.775,37.358,19.275,59.54,37.5,22.183,18.231,42.157,43.622,59.931,76.172,17.768,32.557,28.73,73.828,32.884,123.828,2.59,48.438-3.697,91.602-18.874,129.493-15.178,37.891-35.158,69.988-59.931,96.289-24.778,26.307-50.396,46.229-76.858,59.766-26.462,13.543-49.684,20.057-69.658,19.531-22.054-1.818-45.337-10.09-69.854-24.805-24.517-14.709-41.707-29.748-51.563-45.117-7.528-13.537-12.647-41.992-15.372-85.352s-3.636-91.272-2.724-143.75c.906-52.472,3.046-99.023,6.421-139.648,3.369-40.625,7.26-64.709,11.675-72.266,11.675-16.144,28.664-27.472,50.979-33.984,22.31-6.506,44.753-9.766,67.324-9.766ZM194.79,311.094c-11.936.263-18.29,6.385-19.068,18.359l3.113,158.594c.517,11.463,5.12,18.164,13.815,20.117,8.689,1.953,18.679-.451,29.964-7.227,11.286-6.77,21.209-17.639,29.771-32.617,8.562-14.972,12.97-33.79,13.231-56.446-.262-22.912-4.348-41.857-12.258-56.836-7.917-14.972-17.318-26.104-28.214-33.398-10.896-7.287-21.015-10.803-30.354-10.547Z' },
  { nombre: 'E', svg: EImage, viewBox: { width: 349.886, height: 762.032 }, path: 'M184.672,170.859c38.138-2.081,65.634-2.734,82.501-1.953,15.305,1.825,25.49,8.789,30.549,20.898,5.06,12.109,6.743,25.977,5.06,41.602-1.69,15.625-5.06,29.755-10.118,42.383-5.06,12.635-9.924,20.508-14.594,23.633-14.788,2.606-30.293,3.778-46.504,3.516-16.217-.256-36.131-1.562-59.735-3.906v71.094c16.6-.256,30.609-.128,42.029.391,11.413.525,22.309,1.825,32.689,3.906,13.486,20.312,21.337,39.062,23.544,56.25,2.201,17.188.645,31.122-4.67,41.797-5.32,10.682-12.52,16.406-21.599,17.188-21.275,0-46.181.135-74.717.391v68.359c46.437-2.344,86.392-3.125,119.86-2.344,15.821,1.043,25.685,7.488,29.576,19.336,3.892,11.854,4.146,25.391.778,40.625-3.375,15.234-8.112,28.455-14.204,39.648-6.1,11.199-11.092,16.797-14.983,16.797-12.197.262-24.517.652-36.97,1.172-29.059,1.043-58.051,1.629-86.976,1.758-28.931.135-57.011-1.496-84.252-4.883-5.71.262-11.286-6.445-16.734-20.117s-10.641-32.227-15.566-55.664c-4.931-23.438-9.212-49.805-12.842-79.102-3.636-29.297-6.421-59.571-8.367-90.821s-2.724-61.584-2.335-91.016c.389-29.425,2.201-55.987,5.448-79.688,3.241-23.693,8.105-42.578,14.593-56.641,6.482-14.062,15.043-21.094,25.685-21.094,37.359-.256,74.973-1.428,112.855-3.516Z' },
  { nombre: 'F', svg: FImage, viewBox: { width: 382.965, height: 762.032 }, path: 'M27.842,224.766c1.295-10.412,3.502-19.396,6.616-26.953,3.113-7.55,8.494-15.1,16.15-22.656,7.649-7.55,18.29-13.867,31.911-18.945s31.193-7.617,52.731-7.617c72.383-.256,127.509,3.064,165.391,9.961,37.876,6.903,56.944,19.208,57.206,36.914,1.033,14.844,1.617,30.469,1.751,46.875.128,16.406-1.106,30.078-3.697,41.016-2.857,7.557-11.936,11.2-27.24,10.938-15.312-.256-33.213-1.818-53.704-4.688-20.236-2.862-39.11-4.553-56.622-5.078-17.512-.519-30.032,2.606-37.553,9.375-5.193,5.731-8.628,11.591-10.313,17.578-1.69,5.994-2.14,11.719-1.362,17.188s2.073,10.419,3.892,14.844c1.812,4.432,4.408,9.119,7.783,14.062,15.043-1.818,27.952-2.862,38.72-3.125,10.763-.256,21.599.263,32.495,1.562,10.896,1.307,20.103,3.974,27.63,8.008,7.521,4.041,11.675,9.961,12.453,17.773.255,3.906.517,8.075.778,12.5.517,9.9.839,19.989.973,30.273.128,10.291-.522,19.794-1.945,28.516-1.43,8.729-4.221,15.887-8.367,21.485-4.153,5.604-10.252,8.398-18.29,8.398-12.198,0-25.04-.061-38.526-.195-13.493-.129-29.576-.324-48.255-.586v71.094c-1.04,11.719-1.818,25.135-2.335,40.234-.778,25-2.208,45.312-4.281,60.938-.778,5.213-8.367,11.133-22.766,17.773-14.399,6.641-31.005,11.395-49.812,14.258-18.813,2.869-35.286,1.172-49.423-5.078-14.144-6.25-21.598-19.66-22.376-40.234-4.67-70.568-6.75-141.857-6.227-213.868.517-72.003,2.724-139.514,6.616-202.539Z' },
  { nombre: 'G', svg: GImage, viewBox: { width: 484.146, height: 762.032 }, path: 'M225.533,168.125c35.024-7.031,67.579-9.826,97.679-8.398,30.093,1.435,53.314,10.419,69.658,26.953,16.345,16.541,21.404,43.945,15.178,82.227-8.307,16.406-17.646,26.893-28.02,31.445-10.38,4.56-21.403,5.536-33.078,2.93-11.675-2.6-23.738-6.769-36.191-12.5-33.212-8.068-60.319-6.896-81.334,3.516-21.014,10.419-37.037,28.778-48.061,55.078-11.03,26.307-17.84,58.984-20.431,98.047.517,19.532,5.643,38.477,15.372,56.836s21.854,32.617,36.386,42.773c14.526,10.156,29.314,12.695,44.363,7.617,15.044-5.078,28.02-21.289,38.916-48.633.517-1.301.906-2.6,1.167-3.906,1.296-3.906,2.335-8.918,3.113-15.039.778-6.115.128-11.779-1.945-16.992-1.818-3.381-4.348-6.506-7.589-9.375-3.247-2.862-6.555-5.334-9.923-7.422-3.375-2.081-7.528-4.425-12.453-7.031-6.227-1.818-10.058-7.287-11.48-16.406-1.429-9.112-.845-19.201,1.751-30.273,2.591-11.065,6.871-20.568,12.843-28.516,5.965-7.94,13.23-11.523,21.792-10.742,25.162-2.081,46.565-2.93,64.211-2.539,17.64.391,34.635,2.674,50.979,6.836,16.345,4.169,28.798,11.2,37.359,21.094,8.038,10.938,12.258,25.33,12.647,43.164.389,17.841-1.168,35.81-4.67,53.907-3.502,18.104-6.944,33.008-10.312,44.727-.778,6.775-2.469,11.98-5.06,15.625-.778,2.605-1.69,5.213-2.724,7.812-6.75,22.137-15.828,42.908-27.241,62.305-11.419,19.402-29.643,34.832-54.676,46.289-25.04,11.463-61.554,16.406-109.548,14.844-51.369-3.906-92.753-15.625-124.141-35.156-31.394-19.531-55.005-43.029-70.827-70.508-15.828-27.473-25.946-54.883-30.354-82.227-.523-59.375,4.536-107.874,15.177-145.508,10.635-37.628,24.127-67.053,40.472-88.281,16.344-21.222,32.944-36.914,49.812-47.07,16.861-10.156,31.388-17.443,43.585-21.875,5.704-2.344,10.246-4.425,13.621-6.25,14.526-3.381,29.187-6.506,43.974-9.375Z' },
  { nombre: 'H', svg: HImage, viewBox: { width: 469.357, height: 762.032 }, path: 'M53.721,147.617c16.21-5.078,34.635-5.273,55.26-.586,20.625,4.688,38.654,11.2,54.092,19.531,15.433,8.338,23.283,15.369,23.544,21.094l6.227,147.266c4.925,9.119,9.729,16.602,14.399,22.461s10.051,10.877,16.149,15.039c6.093,4.169,12.647,5.994,19.652,5.469,5.704-.519,10.18-2.404,13.427-5.664,3.24-3.253,5.703-7.159,7.394-11.719,1.685-4.553,2.724-9.045,3.113-13.477.389-4.425.45-9.631.194-15.625l-2.724-142.578c.778-6.25,7.978-12.628,21.598-19.141,13.621-6.506,29.509-11.328,47.672-14.453,18.156-3.125,34.373-2.472,48.645,1.953,14.265,4.432,22.31,14.325,24.128,29.688,9.34,68.494,16.345,143.359,21.014,224.609,4.67,81.25,7.522,156.122,8.562,224.61-.261,5.469-7.722,12.305-22.376,20.508-14.66,8.203-32.045,14.844-52.147,19.922-20.108,5.078-38.398,5.73-54.871,1.953-16.478-3.771-26.656-14.648-30.548-32.617l-3.503-90.234c-.262-8.85-2.529-18.225-6.811-28.125-4.28-9.895-10.963-15.234-20.041-16.016-10.118.781-20.759,5.799-31.911,15.039-11.158,9.246-16.734,18.945-16.734,29.102l4.67,100.391c.255,13.025-6.877,22.205-21.403,27.539-14.533,5.34-31.656,7.684-51.369,7.031-19.719-.646-37.298-3.381-52.731-8.203-15.438-4.816-23.933-10.607-25.49-17.383-9.084-76.037-15.828-156.965-20.236-242.774-4.415-85.803-5.71-164.258-3.892-235.352,1.812-21.094,10.83-34.18,27.046-39.258Z' },
  { nombre: 'I', svg: IImage, viewBox: { width: 223.8, height: 762.032 }, path: 'M49.246,196.836c16.6-10.284,35.541-15.948,56.817-16.992,21.27-1.037,39.822,3.26,55.649,12.891,15.822,9.638,23.866,25.525,24.127,47.656l1.946,100.781v24.219c-.261,23.438-.194,48.768.195,75.977.389,27.215,1.751,53.711,4.086,79.493l4.67,81.641c.255,11.199-6.421,21.289-20.042,30.273s-29.965,14.648-49.034,16.992c-19.068,2.344-36.581-.977-52.536-9.961-15.955-8.984-26.14-25.842-30.549-50.586-8.823-60.156-15.372-119.465-19.652-177.93-4.281-58.459-5.387-115.948-3.308-172.461,1.812-17.706,11.024-31.701,27.63-41.992Z' },
  { nombre: 'J', svg: JImage, viewBox: { width: 410.595, height: 762.032 }, path: 'M99.836,163.828h184.849c12.971.263,24.384.135,34.246-.391,12.709-.781,22.96-.519,30.743.781,7.783,1.307,13.487,5.469,17.123,12.5,3.63,7.031,5.704,18.885,6.227,35.547v290.235c1.812,42.449-6.749,77.088-25.685,103.906-18.94,26.824-43.913,45.898-74.912,57.227-31.005,11.328-63.433,15.105-97.289,11.328-33.856-3.771-64.733-15.295-92.619-34.57-27.892-19.27-48.322-46.094-61.292-80.469-2.335-13.801-3.502-27.99-3.502-42.578v-2.344c-1.301-22.131,1.812-39.514,9.34-52.149,7.521-12.628,17.64-21.484,30.354-26.562,12.708-5.078,26.329-7.482,40.861-7.227,14.01,0,26.718,2.021,38.137,6.055,11.414,4.041,20.625,12.177,27.63,24.414,7.005,12.245,10.635,30.34,10.896,54.297.778,17.969,4.147,30.34,10.118,37.109,5.965,6.775,11.414,10.027,16.345,9.766,5.448,0,11.48-2.99,18.095-8.984,6.616-5.988,10.18-16.406,10.702-31.25l-4.67-224.219-102.737-1.562c-16.606-.256-29.321-6.964-38.137-20.117-8.823-13.146-14.01-28.448-15.566-45.898-1.557-17.443.255-32.678,5.448-45.703,5.187-13.019,13.62-19.396,25.295-19.141Z' },
  { nombre: 'K', svg: KImage, viewBox: { width: 427.718, height: 762.032 }, path: 'M43.408,154.062c15.566-5.469,33.401-7.422,53.509-5.859,20.102,1.562,37.748,5.664,52.925,12.305,15.177,6.641,23.021,14.648,23.544,24.023l-1.946,109.375,139.318-129.297c9.34-9.112,20.819-9.112,34.44,0,13.62,9.119,25.684,23.377,36.191,42.773,10.507,19.403,15.627,39.911,15.371,61.523l-123.362,137.891,103.516,141.797c7.005,10.682,7.005,20.77,0,30.273-7.005,9.51-17.707,18.104-32.105,25.781-14.398,7.684-28.992,14.129-43.78,19.336-14.788,5.213-26.335,8.729-34.635,10.547l-101.958-141.797,3.502,159.766c-10.118,3.65-23.155,7.031-39.11,10.156s-32.172,5.145-48.645,6.055c-16.478.916-30.293-.195-41.445-3.32-11.158-3.125-16.868-9.24-17.123-18.359l-3.502-462.5c1.295-14.844,9.729-25,25.295-30.469Z' },
  { nombre: 'L', svg: LImage, viewBox: { width: 421.491, height: 762.032 }, path: 'M29.788,497.032c-3.113-53.644-4.804-104.816-5.059-153.516.255-9.112.389-20.703.389-34.766.255-24.219.517-49.279.778-75.195.255-25.909.517-44.592.778-56.055.778-11.456,6.81-19.141,18.096-23.047s25.228-5.139,41.834-3.711c16.6,1.435,33.272,4.364,50.006,8.789,16.734,4.432,30.743,9.375,42.029,14.844s17.317,10.291,18.096,14.453c-.261,23.438-1.04,54.041-2.335,91.797-1.301,35.419-2.274,71.552-2.918,108.398-.651,36.854-.523,68.945.389,96.29.906,27.344,3.308,44.666,7.199,51.953,7.783,7.557,22.182,10.742,43.196,9.57,21.015-1.172,43.975-3.711,68.881-7.617,17.379-2.6,33.596-4.688,48.645-6.25,5.704,0,11.931,6.316,18.68,18.945,6.743,12.635,11.803,27.801,15.177,45.508,3.369,17.713,2.853,33.984-1.557,48.828-4.414,14.844-14.787,24.354-31.132,28.516-49.557,13.025-118.693,19.402-207.42,19.141-21.537,0-39.372-2.668-53.509-8.008-14.144-5.334-25.362-12.109-33.662-20.312-8.306-8.203-14.399-16.34-18.291-24.414-3.892-8.068-6.877-17.834-8.95-29.297-3.113-22.912-6.227-61.193-9.34-114.844Z' },
  { nombre: 'M', svg: MImage, viewBox: { width: 537.07, height: 762.032 }, path: 'M39.906,191.758c11.675-7.422,26.329-13.537,43.975-18.359,17.64-4.815,35.413-7.354,53.314-7.617,17.901-.256,33.079,2.674,45.532,8.789,12.453,6.122,19.068,16.346,19.847,30.664,2.852,28.125,6.093,48.114,9.729,59.961,3.63,11.854,8.755,24.677,15.372,38.477,6.615,13.807,15.11,21.094,25.489,21.875,10.118-.519,18.874-8.068,26.269-22.656,7.394-14.581,13.426-31.445,18.096-50.586s9.206-43.683,13.62-73.633c1.034-9.631,10.246-18.097,27.63-25.391,17.379-7.287,37.554-12.237,60.515-14.844,22.96-2.6,43.391-1.69,61.292,2.734,17.9,4.432,28.019,13.544,30.354,27.344,3.369,38.281,5.06,81.445,5.06,129.492s-.65,97.461-1.946,148.242c-1.817,70.838-2.079,135.809-.778,194.922-1.039,8.594-9.212,17.254-24.517,25.977-15.311,8.729-33.146,15.625-53.509,20.703-20.37,5.078-38.526,6.189-54.482,3.32-15.955-2.863-24.845-11.848-26.657-26.953l-5.059-214.454c-7.005,12.244-13.298,22.266-18.874,30.079-5.582,7.812-11.809,14.715-18.68,20.703-6.877,5.994-13.814,9.375-20.819,10.156-7.005,0-14.144-2.6-21.404-7.812-7.266-5.207-14.076-11.328-20.431-18.359-6.36-7.031-13.425-16.016-21.208-26.954l-2.724,198.829c-1.04,4.949-9.474,11.133-25.295,18.555-15.828,7.422-34.185,13.477-55.066,18.164-20.887,4.688-39.438,5.664-55.649,2.93-16.217-2.734-25.362-11.652-27.436-26.758-6.488-67.707-11.352-146.418-14.593-236.133-3.247-89.709-4.475-162.305-3.697-217.773-.523-8.331,5.059-16.211,16.733-23.633Z' },
  { nombre: 'N', svg: NImage, viewBox: { width: 447.175, height: 762.032 }, path: 'M38.739,639.61L18.892,188.828c-.523-7.55,5.576-13.995,18.291-19.336,12.708-5.334,28.019-9.045,45.92-11.133,17.901-2.081,34.306-2.148,49.228-.195,14.916,1.953,24.188,6.189,27.825,12.695l49.812,139.844c3.63,7.031,6.743,14.453,9.339,22.266,3.63,12.5,8.951,23.377,15.955,32.617,7.005,9.247,18.808,13.611,35.414,13.086l-1.557-48.438-5.448-150.781c-.523-7.55,5.965-13.928,19.457-19.141,13.487-5.206,29.637-8.722,48.45-10.547,18.808-1.818,35.735-1.172,50.785,1.953,15.043,3.125,23.738,9.51,26.073,19.141,4.147,76.825,6.811,154.169,7.978,232.031,1.168,77.87-.328,156.512-4.475,235.938-.523,12.244-6.227,22.266-17.123,30.078s-24.39,12.371-40.473,13.672c-16.089,1.307-32.172-1.428-48.255-8.203-16.09-6.77-29.576-18.615-40.473-35.547l-89.505-148.828c1.034,31.25,1.946,57.422,2.724,78.516s1.49,40.76,2.14,58.984c.645,18.23,1.101,30.604,1.362,37.109-5.448,9.9-15.566,16.541-30.354,19.922-14.788,3.387-30.743,3.973-47.866,1.758-17.123-2.209-31.978-7.287-44.558-15.234-12.587-7.941-19.525-18.42-20.82-31.445Z' },
  { nombre: 'O', svg: OImage, viewBox: { width: 502.436, height: 762.032 }, path: 'M265.616,197.422c11.152.263,22.571,1.307,34.246,3.125,37.614,4.95,68.747,16.932,93.397,35.938,24.645,19.013,43.196,42.188,55.649,69.531s19.068,55.994,19.847,85.938c.778,29.95-3.764,58.203-13.62,84.766-4.67,10.938-13.231,24.939-25.685,41.992-12.453,17.059-28.67,34.57-48.645,52.539-19.98,17.969-43.586,33.729-70.826,47.266-27.241,13.543-57.856,22.4-91.841,26.562-32.434,5.994-62.399,3.582-89.895-7.227-27.502-10.803-50.463-31.701-68.881-62.695-18.424-30.988-30.488-73.828-36.191-128.516-.778-42.188,9.662-82.227,31.327-120.117,21.659-37.891,50.979-68.811,87.949-92.773,36.97-23.956,78.026-36.065,123.167-36.328ZM310.369,350.938c-12.714-.519-30.487,7.422-53.314,23.828-35.802,32.812-59.674,60.352-71.604,82.617-11.936,22.266-13.882,37.5-5.837,45.704,8.038,8.203,23.866,7.557,47.477-1.953,23.604-9.504,53.053-29.621,88.339-60.352,9.595-12.756,16.016-25.977,19.263-39.648,3.241-13.672,2.919-25.323-.973-34.961-3.892-9.631-11.675-14.709-23.35-15.234Z' },
  { nombre: 'P', svg: PImage, viewBox: { width: 428.885, height: 762.032 }, path: 'M153.929,122.031c4.147.525,8.817.916,14.01,1.172,16.861,1.044,37.225,3.583,61.098,7.617,23.866,4.041,47.927,11.523,72.188,22.461,24.255,10.938,45.336,27.479,63.237,49.609,17.901,22.138,29.442,51.825,34.635,89.062,1.296,44.531-5.059,80.408-19.068,107.617-14.01,27.216-37.231,45.575-69.659,55.078-32.434,9.51-75.886,10.352-130.367,2.539l29.187,221.485c-22.833,6.775-42.485,11.98-58.957,15.625-16.479,3.643-32.884,6.055-49.229,7.227-16.344,1.172-29.965-.264-40.861-4.297-10.896-4.035-16.217-12.043-15.956-24.023L15.389,142.344c8.562-3.125,18.351-6.115,29.381-8.984,11.024-2.862,27.302-5.334,48.839-7.422,21.531-2.081,41.64-3.381,60.319-3.906ZM170.273,249.766c-7.783-.519-11.419,2.088-10.896,7.812l5.837,72.266c1.295,8.338,6.287,10.877,14.982,7.617,8.689-3.253,17.445-9.57,26.268-18.945,8.817-9.375,14.01-19.269,15.566-29.688.517-7.031-2.208-13.477-8.172-19.336-5.971-5.859-13.104-10.547-21.404-14.062-8.306-3.516-15.7-5.401-22.182-5.664Z' },
  { nombre: 'Q', svg: QImage, viewBox: { width: 577.932, height: 762.032 }, path: 'M297.527,165c12.708,0,25.685,1.172,38.915,3.516,42.808,5.469,78.221,19.013,106.24,40.625,28.02,21.619,49.095,48.047,63.237,79.297,14.138,31.25,21.727,63.867,22.767,97.852,1.033,33.984-4.153,66.083-15.566,96.29-1.04,2.088-1.946,4.297-2.725,6.641-3.113,8.074-7.461,16.932-13.036,26.562-5.582,9.637-14.983,21.484-28.214,35.547-2.08,2.605-.584,6.512,4.475,11.719,5.06,5.213,11.347,10.938,18.874,17.188,5.966,4.949,11.608,9.961,16.929,15.039,5.314,5.078,9.272,9.832,11.869,14.258-5.448,10.938-10.446,20.312-14.982,28.125-4.542,7.812-9.474,15.369-14.788,22.656-5.32,7.293-10.507,12.957-15.566,16.992-5.059,4.041-9.534,5.145-13.426,3.32-7.783-4.688-15.505-10.742-23.154-18.164-7.656-7.422-14.728-14.777-21.209-22.07-6.488-7.031-12.064-12.695-16.734-16.992s-7.917-5.92-9.729-4.883c-20.236,13.807-42.746,25.721-67.519,35.742-24.778,10.027-51.697,16.736-80.75,20.117-36.842,6.512-70.893,3.65-102.153-8.594-31.266-12.238-57.4-35.998-78.415-71.289-21.015-35.285-34.635-84.045-40.861-146.29-1.04-47.656,10.83-93.029,35.608-136.133,24.772-43.097,58.179-78.32,100.208-105.664s88.594-41.144,139.707-41.406ZM348.507,339.609c-14.533-.781-34.635,8.203-60.319,26.953-45.403,41.406-74.657,75.653-87.754,102.735-13.104,27.088-12.715,43.885,1.167,50.391,13.875,6.512,38.459-.256,73.745-20.312,1.295-.781,3.113-1.562,5.448-2.344,2.334-.52,4.213-1.232,5.643-2.148,1.423-.91,1.751-1.887.973-2.93-7.527-8.85-9.99-17.707-7.394-26.563,2.59-8.85,8.104-16.406,16.539-22.656,8.428-6.25,17.572-9.766,27.436-10.547,9.856-.781,18.29,2.734,25.295,10.547,1.557,1.562,3.174,1.502,4.864-.195,1.685-1.69,3.436-3.967,5.254-6.836,1.812-2.6,3.63-4.815,5.448-6.641,10.896-14.318,17.317-28.253,19.263-41.797,1.946-13.537-.134-24.805-6.227-33.789-6.099-8.984-15.895-13.604-29.381-13.867Z' },
  { nombre: 'R', svg: RImage, viewBox: { width: 402.422, height: 762.032 }, path: 'M160.155,125.547c35.802.263,67.713,6.971,95.732,20.117,28.019,13.153,48.188,33.271,60.514,60.352,12.319,27.088,12.708,61.658,1.167,103.711-11.547,42.06-39.243,92.127-83.085,150.195l131.535,106.25c1.557,14.324-2.919,27.869-13.426,40.625-10.507,12.762-23.483,24.354-38.916,34.766-15.438,10.418-29.904,19.275-43.391,26.562l-117.525-96.094,22.182,123.828c-4.415,2.08-13.365,5.334-26.852,9.766-13.493,4.424-28.214,8.33-44.169,11.719-15.956,3.381-29.965,4.357-42.029,2.93-12.064-1.436-18.875-6.836-20.431-16.211-10.896-73.438-17.317-146.35-19.263-218.75-1.946-72.394-2.402-144.532-1.362-216.407.517-37.5.778-75,.778-112.5,44.364-20.831,90.54-31.115,138.54-30.859ZM150.426,259.531c-8.823-.519-12.976,2.344-12.453,8.594l6.616,80.859c1.557,9.375,7.133,12.244,16.734,8.594,9.595-3.644,19.324-10.742,29.187-21.289,9.857-10.547,15.694-21.545,17.512-33.008.517-7.812-2.529-14.972-9.145-21.484-6.616-6.506-14.533-11.779-23.739-15.82-9.212-4.034-17.451-6.183-24.711-6.445Z' },
  { nombre: 'S', svg: SImage, viewBox: { width: 396.195, height: 762.032 }, path: 'M341.308,252.695c-6.36,14.197-14.922,27.216-25.685,39.062-10.769,11.854-19.652,19.471-26.657,22.852-16.867-7.287-31.589-13.281-44.169-17.969-12.587-4.688-25.362-8.594-38.332-11.719-7.783-1.818-15.761-2.014-23.933-.586-8.172,1.435-13.17,4.755-14.982,9.961-1.818,7.812-.912,14.393,2.724,19.727,3.63,5.341,9.34,10.352,17.123,15.039,11.93,7.031,25.685,14.325,41.25,21.875,22.048,10.419,43.646,22.596,64.795,36.523,21.142,13.935,37.681,31.775,49.617,53.516,11.93,21.747,14.788,49.159,8.562,82.227-7.783,43.494-21.403,76.893-40.861,100.195-19.458,23.309-42.096,38.807-67.908,46.484-25.818,7.684-52.475,9.766-79.971,6.25-27.502-3.516-53.253-10.352-77.248-20.508-24-10.156-43.914-21.484-59.735-33.984-.262-6.77.389-16.211,1.946-28.32s4.214-24.475,7.978-37.109c3.758-12.629,8.884-22.912,15.372-30.859,6.482-7.941,14.526-10.871,24.128-8.789,18.418,12.762,34.635,22.852,48.645,30.273,14.009,7.422,28.603,13.152,43.78,17.188,15.177,4.041,29.12,4.102,41.834.195,12.708-3.906,22.182-14.191,28.408-30.859,5.448-16.145,4.214-29.553-3.697-40.234-7.917-10.676-19.98-19.66-36.191-26.954-16.217-7.287-33.796-14.19-52.731-20.703-21.014-7.031-40.539-14.776-58.568-23.242-18.035-8.459-31.072-19.336-39.11-32.617-13.231-19.269-19.98-43.42-20.236-72.461-.262-29.034,5.059-57.227,15.955-84.57,10.896-27.344,26.329-48.175,46.31-62.5,26.718-16.925,56.817-24.67,90.285-23.242,33.467,1.435,64.989,8.729,94.565,21.875,29.575,13.153,52.013,28.711,67.323,46.68,5.966,10.682,5.771,23.114-.583,37.305Z' },
  { nombre: 'T', svg: TImage, viewBox: { width: 506.327, height: 762.032 }, path: 'M16.167,266.758c-1.295-12.109-1.362-25.256-.195-39.453,1.167-14.19,3.436-31.836,6.811-52.93l428.461-16.406c9.595,2.606,15.237,10.224,16.928,22.852,1.685,12.635,1.423,26.562-.778,41.797-2.207,15.234-4.475,28.32-6.81,39.258-1.04,4.432-1.69,8.075-1.946,10.938l-117.914,3.516-21.403,367.579c-.523,4.168-6.75,8.924-18.68,14.258-11.937,5.34-25.818,9.766-41.64,13.281-15.828,3.516-29.838,4.559-42.029,3.125-12.198-1.428-18.68-6.836-19.458-16.211l-14.009-371.094-157.219,3.516c-5.448-3.906-8.823-11.914-10.118-24.023Z' },
  { nombre: 'U', svg: UImage, viewBox: { width: 466.633, height: 762.032 }, path: 'M43.408,161.094c15.305-4.688,33.012-7.812,53.12-9.375,20.102-1.562,37.748-.195,52.925,4.102,15.177,4.297,22.893,12.695,23.155,25.195l-4.67,296.094c0,9.637.517,17.969,1.557,25,1.034,7.031,3.046,14.197,6.032,21.484,2.979,7.293,7.327,13.543,13.037,18.75,5.704,5.213,13.359,8.338,22.96,9.375,11.93.781,21.208-1.887,27.825-8.008,6.615-6.115,11.413-13.732,14.398-22.852,2.979-9.113,4.73-17.707,5.254-25.781.517-8.068.778-13.281.778-15.625s.645-18.225,1.945-47.657c1.295-29.425,2.725-62.5,4.281-99.219s3.502-83.331,5.837-139.844c1.034-15.1,9.146-24.347,24.322-27.734,15.177-3.381,32.622-3.125,52.342.781,19.713,3.906,36.97,9.119,51.758,15.625,14.788,6.513,22.31,11.854,22.571,16.016-.778,28.388-1.302,56.775-1.557,85.156,0,42.969-1.04,86.005-3.113,129.102-2.08,43.104-6.75,86.659-14.01,130.665-7.005,28.906-20.498,54.559-40.473,76.953-19.98,22.4-43.002,39.648-69.075,51.758s-51.563,17.518-76.469,16.211c-55.005-4.426-99.758-18.42-134.259-41.992-34.507-23.566-52.925-53.576-55.26-90.039-7.005-64.062-10.963-127.6-11.87-190.625-.912-63.019-.067-125.781,2.53-188.281.778-5.469,8.817-10.547,24.127-15.234Z' },
  { nombre: 'V', svg: VImage, viewBox: { width: 596.611, height: 762.032 }, path: 'M36.209,169.492c12.842-8.722,29.381-14.123,49.618-16.211,20.236-2.081,38.782-1.758,55.649.977,16.862,2.734,26.979,6.836,30.354,12.305l61.486,240.625c2.59,13.807,5.381,25.195,8.367,34.18,2.979,8.984,7.005,16.864,12.063,23.633,5.059,6.776,11.219,10.292,18.485,10.547,7.005-.256,13.292-4.035,18.874-11.329,5.575-7.287,10.312-15.753,14.204-25.391,3.892-9.631,7.783-22.003,11.675-37.109l62.653-225.781c2.335-5.206,10.763-9.112,25.296-11.719,14.526-2.6,31.582-3.32,51.174-2.148,19.586,1.172,38.198,4.627,55.844,10.352,17.64,5.731,30.744,14.258,39.305,25.586,8.562,11.328,8.817,25.977.778,43.945-18.162,62.244-41.901,124.158-71.216,185.742-29.32,61.59-62.265,122.852-98.846,183.79-15.565,22.918-34.963,41.15-58.179,54.688-23.222,13.543-47.026,19.141-71.41,16.797-24.389-4.162-45.275-14.123-62.654-29.883-17.384-15.754-29.187-31.701-35.413-47.852-1.818-4.426-9.212-26.496-22.182-66.211-12.976-39.709-27.825-85.022-44.559-135.938-16.734-50.909-37.943-115.686-63.627-194.336-4.67-17.443-.584-30.529,12.258-39.258Z' },
  { nombre: 'W', svg: WImage, viewBox: { width: 677.945, height: 762.032 }, path: 'M253.163,238.438c5.965-9.631,16.667-16.534,32.105-20.703,15.433-4.162,32.233-6.055,50.396-5.664,18.157.391,34.502,2.869,49.034,7.422,14.526,4.56,24.128,10.877,28.798,18.945,18.679,76.307,30.415,119.531,35.219,129.688,4.797,10.156,15.109,16.669,30.938,19.531l7.783-46.094,24.128-143.75c1.033-7.031,8.428-11.779,22.182-14.258,13.748-2.472,29.704-2.734,47.866-.781,18.156,1.953,34.052,5.927,47.672,11.914,13.62,5.994,20.559,13.807,20.819,23.438-10.896,73.438-23.416,147.138-37.553,221.094-14.144,73.963-30.811,148.047-50.007,222.266-2.858,11.463-10.186,19.793-21.987,25-11.809,5.213-25.49,6.836-41.057,4.883s-30.293-7.746-44.169-17.383c-13.882-9.631-27.308-22.656-40.277-39.062l-78.999-101.172-83.279,100c-11.42,17.188-24.067,30.604-37.943,40.234-13.882,9.637-28.603,15.43-44.169,17.383-15.566,1.953-29.254.33-41.056-4.883-11.809-5.207-19.135-13.537-21.987-25-19.202-74.219-35.869-148.303-50.006-222.266-14.144-73.956-26.657-147.656-37.554-221.094.255-9.631,7.199-17.443,20.82-23.438,13.621-5.987,29.509-9.961,47.671-11.914,18.157-1.953,34.179-1.69,48.061.781,13.876,2.479,21.209,7.227,21.987,14.258l24.128,143.75,7.783,46.094c15.822-2.862,26.201-9.375,31.132-19.531,4.926-10.156,15.433-53.381,31.521-129.688Z' },
  { nombre: 'X', svg: XImage, viewBox: { width: 578.71, height: 762.032 }, path: 'M204.13,275.938c9.595,11.2,18.156,20.312,25.685,27.344,7.521,7.031,15.627,13.281,24.322,18.75,8.688,5.469,17.184,8.203,25.489,8.203,8.3-.519,16.6-3.644,24.906-9.375,8.3-5.725,15.955-12.305,22.96-19.727s14.916-16.857,23.738-28.32l59.931-80.078c9.856-15.881,20.235-24.737,31.132-26.562,10.896-1.818,21.599.135,32.105,5.859,10.508,5.731,19.908,11.981,28.214,18.75.778.781,1.557,1.435,2.335,1.953,8.817,6.513,16.667,15.039,23.544,25.586,6.871,10.547,10.958,21.68,12.259,33.398,1.295,11.719-2.079,22.656-10.118,32.812l-94.565,110.156c-7.527,7.557-13.62,14.197-18.29,19.922-4.67,5.731-8.823,11.914-12.453,18.555-3.636,6.641-5.582,12.83-5.837,18.555.255,5.994,1.945,11.719,5.059,17.188,3.113,5.469,6.677,10.352,10.702,14.648,4.02,4.297,9.272,9.051,15.761,14.258l57.206,60.156c10.635,13.543,17.378,24.48,20.236,32.812,2.852,8.338,2.268,16.016-1.752,23.047-4.025,7.031-10.701,15.105-20.041,24.219-9.085,9.9-18.035,17.322-26.852,22.266-8.823,4.949-18.874,5.73-30.16,2.344-11.285-3.381-25.101-12.5-41.445-27.344l-68.491-78.906c-4.153-4.943-7.978-8.984-11.48-12.109-3.502-3.125-7.266-5.92-11.285-8.398-4.025-2.473-8.111-3.711-12.259-3.711-4.152.262-8.822,2.02-14.009,5.273-5.193,3.26-10.252,6.971-15.178,11.133-4.931,4.168-10.641,9.637-17.123,16.406l-77.052,94.531c-12.714,9.119-24.322,12.439-34.83,9.961-10.507-2.473-20.303-8.137-29.381-16.992-6.488-5.725-12.781-12.951-18.874-21.68-6.099-8.723-9.474-18.42-10.118-29.102-.65-10.676,3.825-22.004,13.426-33.984l79.777-103.125c3.369-4.425,6.16-8.526,8.367-12.305,2.201-3.771,4.02-7.812,5.448-12.109,1.423-4.297,2.007-8.526,1.751-12.695-.262-4.162-1.818-8.398-4.67-12.695-2.858-4.297-5.971-8.264-9.34-11.914-3.375-3.644-7.655-7.812-12.842-12.5l-112.855-118.75c-10.896-10.156-16.673-19.854-17.318-29.102-.65-9.24,1.946-17.834,7.783-25.781,5.837-7.94,12.903-15.039,21.209-21.289,7.783-6.25,16.6-11.193,26.463-14.844,9.856-3.644,20.297-4.034,31.327-1.172,11.024,2.869,22.115,11.072,33.272,24.609l64.211,71.875Z' },
  { nombre: 'Y', svg: YImage, viewBox: { width: 509.829, height: 762.032 }, path: 'M29.593,194.297c12.064-13.281,28.275-23.956,48.645-32.031,20.364-8.068,39.822-11.719,58.374-10.938,18.546.781,31.455,7.557,38.721,20.312l36.191,70.703c5.448,9.638,10.374,17.646,14.788,24.023,4.408,6.385,9.272,11.914,14.594,16.602,5.314,4.688,10.701,7.166,16.149,7.422,5.187-.256,10.179-2.734,14.982-7.422,4.798-4.688,9.206-10.156,13.231-16.406,4.02-6.25,8.233-14.19,12.647-23.828l36.191-82.422c3.369-10.938,10.763-16.992,22.183-18.164,11.413-1.172,24.577,1.044,39.499,6.641,14.916,5.604,28.992,13.086,42.224,22.461s23.282,19.275,30.159,29.688c6.871,10.419,8.105,19.794,3.697,28.125-10.641,17.713-22.96,35.028-36.97,51.953-14.01,16.932-28.02,33.075-42.029,48.438-18.162,19.794-33.729,38.221-46.698,55.273-12.977,17.06-20.37,32.489-22.182,46.289-2.597,27.344-5.193,62.762-7.783,106.25-2.335,41.406-4.932,78.125-7.783,110.156-1.302,9.9-5.516,17.449-12.647,22.656-7.139,5.213-15.312,8.924-24.518,11.133-9.212,2.215-17.451,3.711-24.711,4.492-9.602,1.307-20.108,1.307-31.521,0-11.419-1.301-21.404-4.748-29.965-10.352-8.561-5.598-13.231-13.867-14.009-24.805-.778-24.475-1.946-53.254-3.502-86.328-2.597-52.082-4.281-97.004-5.059-134.766-.778-16.144-7.85-32.812-21.209-50-13.365-17.188-29.254-35.021-47.672-53.516-13.754-13.537-27.046-27.734-39.888-42.578-12.842-14.844-23.933-30.334-33.273-46.484-5.965-15.1-2.919-29.297,9.145-42.578Z' },
  { nombre: 'Z', svg: ZImage, viewBox: { width: 467.411, height: 762.032 }, path: 'M349.674,166.953c30.61-1.037,53.054,3.906,67.324,14.844,14.265,10.938,19.847,26.044,16.733,45.312-3.113,19.275-15.311,40.888-36.58,64.844l-141.264,189.063c-7.783,8.074-14.594,16.541-20.431,25.391-5.838,8.855-7.528,16.406-5.06,22.656,2.463,6.25,12.125,9.375,28.992,9.375l131.924-1.172c14.788,3.387,24.578,9.705,29.382,18.945,4.798,9.246,6.354,19.727,4.67,31.445-1.69,11.719-4.804,23.047-9.34,33.984-4.542,10.938-11.091,23.828-19.652,38.672l-318.719-3.906c-26.986-.256-44.042-5.92-51.174-16.992-7.139-11.066-7.722-25.061-1.751-41.992,5.965-16.926,15.043-34.24,27.241-51.953,12.191-17.707,23.994-33.332,35.413-46.875l123.363-150.391c4.67-5.987,9.729-12.109,15.177-18.359,8.3-9.112,15.109-17.639,20.431-25.586,5.314-7.94,6.159-14.062,2.529-18.359-3.637-4.297-14.66-5.664-33.078-4.102l-123.363,1.953c-4.153-.781-10.185-7.227-18.096-19.336-7.917-12.109-14.465-26.104-19.652-41.992-5.193-15.881-5.643-29.62-1.362-41.211,4.281-11.584,16.539-17.12,36.775-16.602l259.567,2.344Z' }
];
const PATH_RUTA_FONDO = '../../assets/images/fondoTrazadoAbecedario.jpg';
const PORCENTAJE_ACIERTO = 0.7;
const UMBRAL_VERIFICACION = 65;

export default function TrazadoAbecedarioScreen() {
  const [strokes, setStrokes] = useState<any[]>([]);
  const [clearFn, setClearFn] = useState<(() => void) | null>(null);
  const [selectedIndex, setSelectedIndex] = useState(0);
  const selectedLetra: Letra = LETRAS[selectedIndex];
  const SvgLetra = selectedLetra.svg;
  const [result, setResult] = useState<string | null>(null);
  const [size, setSize] = useState<number>(GROSOR_TRAZADO_POR_DEFECTO);
  const [registro, setRegistro] = useState<{ tipo: 'abecedario' | 'animal', valor: string, resultado: string, fecha: string }[]>([]);

  const verificarTrazado = () => {
    const resultado = manejarVerificacionTrazado(
      strokes,
      selectedLetra,
      AREA_DIBUJO_SIZE,
      size * 4, // umbral dinámico según grosor
      PORCENTAJE_ACIERTO,
      size // pasar el grosor del trazo
    );
    setResult(resultado);
    guardarIntento('abecedario', selectedLetra.nombre, resultado);
  }

  function guardarIntento(tipo: 'abecedario' | 'animal', valor: string, resultado: string) {
    setRegistro(prev => {
      const nuevoRegistro = [
        ...prev,
        { tipo, valor, resultado, fecha: new Date().toISOString() }
      ];
      return nuevoRegistro;
    });
  }

  return (
    <ImageBackground
      source={require(PATH_RUTA_FONDO)}
      style={{ flex: 1 }}
      resizeMode="cover"
    >
      <SafeAreaView style={{
        flex: 1,
        backgroundColor: 'transparent'
      }}>

        {/* Encabezado */}
        <View style={{
          marginTop: 60,
          justifyContent: 'flex-end',
          alignItems: 'center'
        }}>
          <Text style={{
            fontFamily: 'GilroyBold',
            fontSize: 32,
            color: '#2D3A4A',
            marginBottom: 8
          }}>
            🖍️ ¡Traza la letra!
          </Text>

          {/* Selector de letra */}
          <LetterSelector
            letters={LETRAS.map(l => l.nombre)}
            selectedLetter={selectedLetra.nombre}
            setSelectedLetter={(nombre) => {
              const idx = LETRAS.findIndex(l => l.nombre === nombre);
              setSelectedIndex(idx);
            }}
            clearFn={clearFn}
            setStrokes={setStrokes}
            setResult={setResult}>
          </LetterSelector>

          {/* Selector de grosor con barra desplazable */}
          <GrosorSelector size={size} setSize={setSize}></GrosorSelector>
        </View>

        {/* Área de trazado */}
        <View style={{
          flex: 2,
          justifyContent: 'center',
          alignItems: 'center'
        }}>
          <View style={{
            position: 'relative',
            height: 400,
            width: 400,
            marginBottom: 16,
            backgroundColor: 'rgba(255, 248, 225, 0.45)',
            borderRadius: 24,
            overflow: 'hidden',
            borderWidth: 2,
            borderColor: '#82a6e7ff',
          }}>
            <SvgLetra
              width="400"
              height="400"
              style={{
                position: 'absolute',
                top: 0,
                left: 0
              }}
            />
            <ExpoDraw
              strokes={strokes}
              containerStyle={{
                backgroundColor: 'rgba(0,0,0,0.01)',
                height: 400,
                width: 400,
                position: 'absolute',
                top: 0,
                left: 0,
              }}
              color="#000000"
              strokeWidth={size}
              enabled={true}
              rewind={(undo) => { }}
              clear={(clear) => setClearFn(() => clear)}
              onChangeStrokes={(newStrokes) => setStrokes(newStrokes)}
            />
          </View>
        </View>

        {/* Botones de Acción */}
        <View style={{
          flex: 1,
          justifyContent: 'flex-start',
          alignItems: 'center'
        }}>
          <View style={{
            flexDirection: 'row',
            justifyContent: 'space-between',
            width: '90%',
            maxWidth: 400,
            marginBottom: 12
          }}>
            <TouchableOpacity
              onPress={() => {
                setStrokes([]);
                setResult(null);
                if (clearFn) clearFn();
              }}
              style={{
                backgroundColor: '#FF69B4',
                padding: 14,
                borderRadius: 16,
                marginRight: 12,
                elevation: 2,
                borderWidth: 2,
                borderColor: '#FFF',
              }}>
              <Text style={{
                color: '#FFF',
                fontFamily: 'GilroyBold',
                fontSize: 18
              }}>
                🧹 Limpiar
              </Text>
            </TouchableOpacity>
            <TouchableOpacity
              onPress={verificarTrazado}
              style={{
                backgroundColor: '#4CAF50', // verde para verificar
                padding: 14,
                borderRadius: 16,
                elevation: 2,
                borderWidth: 2,
                borderColor: '#FFF',
              }}>
              <Text style={{
                color: '#FFF',
                fontFamily: 'GilroyBold',
                fontSize: 18
              }}>
                ✅ Verificar
              </Text>
            </TouchableOpacity>
          </View>

          {/* Resultado */}
          {result && (
            <View style={{
              alignItems: 'center',
              marginTop: 8,
              backgroundColor: '#FFF',
              borderRadius: 18,
              borderWidth: 4,
              borderColor:
                result === '¡Correcto!' ? '#4CAF50'
                  : result === 'Por favor realiza el trazado antes de verificar.' ? '#FF9800'
                    : '#FF69B4',
              paddingVertical: 18,
              paddingHorizontal: 32,
              shadowColor: '#000',
              shadowOffset: { width: 0, height: 4 },
              shadowOpacity: 0.25,
              shadowRadius: 8,
              elevation: 6,
            }}>
              <Text style={{
                fontSize: 28,
                fontFamily: 'GilroyBold',
                color:
                  result === '¡Correcto!' ? '#4CAF50'
                    : result === 'Por favor realiza el trazado antes de verificar.' ? '#FF9800'
                      : '#FF69B4',
                textAlign: 'center',
              }}>
                {result === '¡Correcto!' && '😊 ¡Correcto!'}
                {result === 'Intenta de nuevo' && '😢 Intenta de nuevo'}
                {result === 'Por favor realiza el trazado antes de verificar.' && '⚠️ Por favor realiza el trazado antes de verificar.'}
              </Text>
            </View>
          )}
        </View>

      </SafeAreaView>
    </ImageBackground>
  );
}
